(function($){$.ex=$.ex||{};$.ex.autofocus=function(option){var c=$.extend({},$.ex.autofocus.defaults,option);var focus=function(expr,autofocus){var ret=false;$(expr).each(function(){var target=$(this);var hasAutofocus=target.attr(c.autofocusAttrName);if(!(hasAutofocus===true||hasAutofocus===false)){hasAutofocus=hasAutofocus==""}if(!target.is(":hidden")&&target.attr("type")!="hidden"&&((!autofocus&&(c.focusButton||!(/button|submit/.test(target.attr("type")))))||(autofocus&&hasAutofocus))){ret=true;target.focus();return false}});return ret};if(c.exAutofocus){var errExpr=(c.focusExpr).split(",").join("."+c.errorClass+",")+"."+c.errorClass;if(!focus(errExpr)){if(!focus(c.focusExpr,true)){focus(c.focusExpr)}}}else{focus("*",true)}};$.ex.autofocus.defaults={exAutofocus:false,focusExpr:"input,textarea,select",focusButton:false,errorClass:"error",autofocusAttrName:"autofocus"};var getScriptParam=function(defaults){var url=$("script").last()[0].src,ret=defaults;if(url.indexOf("?")<0){return ret}var paramSet=url.replace(/.+\?/,"").split("&");for(var i=0;i<paramSet.length;i++){var params=paramSet[i].split("=");var value=decodeURIComponent(params[1]);if((/true|false/ig).test(value)){eval("value = "+value)}ret[params[0]]=value}return ret};var param=getScriptParam({autorun:true});if(param.autorun){$(function($){$.ex.autofocus(param)})}})(jQuery);